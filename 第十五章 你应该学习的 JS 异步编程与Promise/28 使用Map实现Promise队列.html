<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>28 ä½¿ç”¨Mapå®žçŽ°Promiseé˜Ÿåˆ—</title>
  </head>
  <body>
    <script src="ajax.js"></script>
    <script>
      //æ¡ˆä¾‹1
      function queue(num) {
        let promise = Promise.resolve()

        num.map((item) => {
          promise = promise.then(() => {
            //è¦æŠŠpromise = ç»™åŠ ä¸Šï¼Œä¸ç„¶å°±æ˜¯1sä¹‹åŽå…¨éƒ¨æ•°ç»„å…ƒç´ éƒ½æ‰“å°å®Œäº†.å¦‚æžœä¸åŠ promise =ï¼Œç›¸å½“äºŽæ˜¯å¯¹let promise = Promise.resolve()è¿™ä¸€ä¸ªPromiseåŽ»å¤„ç†ï¼Œé‚£å°±ä¸æ˜¯promiseçš„æŽ’é˜Ÿäº†
            return new Promise((resolve) => {
              setTimeout(() => {
                console.log(item)
                resolve()
              }, 1000)
            })
          })
        })
      }

      // queue([1, 2, 3, 4, 5, 6])
      //æ¡ˆä¾‹2
      function queue2(promiseArr) {
        let promise2 = Promise.resolve()
        promiseArr.map((v) => {
          promise2 = promise2.then(() => {
            return v()
          })
          console.log(
            'ðŸš€ ~ file: 28 ä½¿ç”¨Mapå®žçŽ°Promiseé˜Ÿåˆ—.html ~ line 33 ~ queue2 ~ promise2',
            promise2,
          )
        })
      }
      function p1() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            console.log('p1')
            resolve()
          }, 1000)
        })
      }
      function p2() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            console.log('p2')
            resolve()
          }, 1000)
        })
      }
      queue2([p1, p2])
    </script>
  </body>
</html>
