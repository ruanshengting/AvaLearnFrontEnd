<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>21 script脚本的Promise加载引擎</title>
  </head>
  <body>
    <script>
      //对比4文件.html 这样就不用嵌套去写了
      function loadScript(src) {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = src
          script.onload = () => resolve(script)
          script.onerror = reject

          document.body.appendChild(script)
        })
      }
      loadScript('hd.js')
        .then((result) => {
          console.log(
            '🚀 ~ file: 21 script脚本的Promise加载引擎.html ~ line 24 ~ .then ~ result1',
            result,
          ) //返回script这个dom 元素
          return loadScript('houdunren.js') //返回一个promise
        })
        .then((result) => {
          console.log(
            '🚀 ~ file: 21 script脚本的Promise加载引擎.html ~ line 24 ~ .then ~ result2',
            result,
          )
          houdunren()
        })
    </script>
  </body>
</html>
