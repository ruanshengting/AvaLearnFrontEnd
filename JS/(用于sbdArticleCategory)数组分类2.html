<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>
      jsæ“ä½œæ•°ç»„åˆ†ç±»ï¼ˆ1ï¼‰
    </title>
  </head>
  <body>
    <div>jsæ“ä½œæ•°ç»„åˆ†ç±»ï¼ˆ1ï¼‰</div>
    <pre></pre>
    <script>
      let test = [
        { id: '7', city: 'å…¨éƒ¨', name: 'ç¨€é¥­' },
        { id: '6', city: 'å…¨éƒ¨', name: 'ç±³é¥­' },
        { id: '1', city: 'é‡åº†', name: 'ç«é”…' },
        { id: '2', city: 'æ±Ÿè‹', name: 'è‚¥è‚ ç²‰' },
        { id: '3', city: 'é‡åº†', name: 'å°é¢' },
        { id: '4', city: 'åŒ—äº¬', name: 'åŒ—äº¬çƒ¤é¸­' },
        { id: '5', city: 'åŒ—äº¬', name: 'é…¸è¾£ç²‰' },
      ]

      let list = test,
        data = []
      for (var i = 0, length = test.length; i < length; i++) {
        console.log('list[i].city', list[i].city)
        console.log('data[list[i].city]', data[list[i].city])
        if (!data[list[i].city]) {
          var arr = []
          arr.push(list[i])
          data[
            list[i].city
          ] = arr /*è®© data[list[i].city] æˆä¸ºä¸€ä¸ªæ–°çš„æ•°ç»„ ç”¨ç±»åˆ«æ¥ä½œä¸ºæ–°æ•°ç»„çš„ç´¢å¼•*/
        } else {
          data[list[i].city].push(list[i])
        }
      }
      console.log('data', data)
      console.log('======å¼€å§‹æ¨¡ä»¿=====')
      var arr = [
        {
          id: 1,
          DataCategoryName: 'wealthåˆè‚¥',
          DataCategoryGroupName: 'åˆè‚¥åº—',
        },
        {
          id: 3,
          DataCategoryName: 'well-beingåˆè‚¥',
          DataCategoryGroupName: 'åˆè‚¥åº—',
        },
        {
          id: 2,
          DataCategoryName: 'healthèŠœæ¹–',
          DataCategoryGroupName: 'èŠœæ¹–åº—',
        },
        {
          id: 4,
          DataCategoryName: 'healthä¸Šæµ·',
          DataCategoryGroupName: 'ä¸Šæµ·åº—',
        },
      ]
      var storeCategoryArr = []
      arr.forEach((item, index) => {
        console.log(item, index)
        if (!storeCategoryArr[item.DataCategoryGroupName]) {
          let itemsArr = []
          itemsArr.push(item)
          storeCategoryArr[item.DataCategoryGroupName] = itemsArr
        } else {
          storeCategoryArr[item.DataCategoryGroupName].push(item)
        }
      })
      console.log('storeCategoryArr', storeCategoryArr)
      var mapCategoryName = arr
        .map((item) => {
          return item.DataCategoryGroupName
        }) /*1.é¦–å…ˆæ˜¯å¾—åˆ°æ‰€æœ‰çš„åˆ†ç±»*/
        .filter((element, index, self) => {
          return index === self.indexOf(element)
        }) /*2.åˆ é™¤é‡å¤çš„åˆ†ç±»ï¼ˆè¿™ä¸ªelementåªèƒ½æ˜¯å•ä¸ªçš„å…ƒç´ æœ¬èº«,ä¸å¯ä»¥element.DataCategoryGroupNameï¼‰*/
        .map((item) => {
          console.log('ğŸš€ ~ file: æ•°ç»„åˆ†ç±»2.html ~ line 81 ~ .map ~ item', item)
          return {
            label: item,
            name: item,
            expanded: true,
            items: [],
          }
        })
        .map((mapItem) => {
          if (storeCategoryArr[mapItem.label]) {
            console.log(
              'storeCategoryArr[item.label]',
              ...storeCategoryArr[mapItem.label],
            )
            //console.log('final item', item)
            mapItem.items.push(...storeCategoryArr[mapItem.label])
          }
          return mapItem
        })

      console.log('mapCategoryName', mapCategoryName)
    </script>
  </body>
</html>
